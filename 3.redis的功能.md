## 慢查询分析

redis提供了慢查询日志功能,当命令执行时间超过预设的阈值时,就将这条命令的相关信息记录下来. 

### 配置

redis提供了`slowlog-log-slower-than` 和 `和slowlog-max-len` 两个值来配置慢查询日志记录功能, 

- 命令执行时间超过了`slowlog-log-slower-than` 将会记录在慢查询日志中
- `slowlog-max-len` 慢查询最多条数 

可以通过修改配置文件来修改这两个配置,也可用在命令行执行 命令配置

```
config set slowlog-log-slower-than 20000 
config set slowlog-max-len 1000 
config rewrite
```

获取慢查询日志

`slowlog get [n]` n指定条数

`slowlog len` 获取慢查询日志列表长度

`slowlog reset `重置慢查询日志 



### 优化

slowlog-max-len 调大, 记录跟多的慢查询日志

根据查询的量调整 `slowlog-log-slower-than`的值. 如果命令执行时间在1毫秒以上, 那么redis的QPS将小于1000. 

定期执行`slow get`命令将慢查询日志持久化到其他存储中. 



## redis-shell

### redis-cli

### redis-server

### redis-benchemark





